<!DOCTYPE html>
<html lang="en">
	<head>
		<script>
			let update = () => {};

			function connectElgatoStreamDeckSocket(inPort, inPropertyInspectorUUID, inRegisterEvent, inInfo, inActionInfo) {
				const websocket = new WebSocket("ws://localhost:" + inPort);
				inActionInfo = JSON.parse(inActionInfo);
				websocket.onopen = () => {
					websocket.send(JSON.stringify({
						event: inRegisterEvent,
						uuid: inPropertyInspectorUUID,
					}));
				};

				const down = document.getElementById("down");
				down.value = inActionInfo.payload.settings.down ?? "";
				const up = document.getElementById("up");
				up.value = inActionInfo.payload.settings.up ?? "";

				update = () => {
					websocket.send(JSON.stringify({
						event: "setSettings",
						context: inActionInfo.context,
						payload: {
							down: down.value,
							up: up.value,
						}
					}));
				};
			}
		</script>
		<link rel="stylesheet" href="sdpi.css" />
	</head>
	<body>
		<div class="sdpi-item">
			<div class="sdpi-item-label">Key down</div>
			<span class="sdpi-item-value textarea">
				<textarea oninput="update();" id="down" placeholder="[t(&quot;hello world!&quot;),m(10,10,r),s(5),b(l),k(ctrl,p),k(uni('a')),k(ctrl,r)]"></textarea>
			</span>
		</div>
		<div class="sdpi-item">
			<div class="sdpi-item-label">Key up</div>
			<span class="sdpi-item-value textarea">
				<textarea oninput="update();" id="up" placeholder="[t(&quot;hello world!&quot;),m(10,10,r),s(5),b(l),k(ctrl,p),k(uni('a')),k(ctrl,r)]"></textarea>
			</span>
		</div>
	</body>
</html>
